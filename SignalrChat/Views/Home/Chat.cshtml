@if (User.Identity.IsAuthenticated)
{
    ViewBag.Profile = User.Identity.Name;
}

<br />
<div class="container clearfix" style="width:1000px;">
    <div class="people-list" id="people-list" style="background-color:#6e6a6a">
        <p style="color:#ffffff;padding-left:30px;padding-top:15px;font-size:x-large;font-family:'Times New Roman', Times, serif"><i class="fa fa-users" style="color:#86BB71 !important;padding-right:10px;font-size:30px"></i>Online Users</p>
        <hr />
        <ul class="list" id="chat-list" style="margin-top:-25px"></ul> <!--list of online users-->
    </div>
    <div class="chat" style="width:700px;">
        <div class="chat-header clearfix">
            <div class="chat-about" style="padding-left: 40%;text-align: center;">
                <div class="chat-with" id="peer" style="font-weight:bolder;">@ViewBag.FullName</div>
                <div class="chat-num-messages">Active on Messenger </div>
            </div>
            <i class="fa fa-star" style="color:#0094ff"></i>
        </div>
        <p id="profile" hidden>@ViewBag.Profile</p>
        <div class="chat-history">
            <ul style="list-style-type: none" id="chat-history"></ul>
        </div>
        <div class="chat-message clearfix" style="margin-left:36px !important">
            <textarea name="message-to-send" id="message-to-send" placeholder="Type your message" rows="3" style="border-bottom:groove #0094ff;max-width:500px;"></textarea>
            <button id="send" style="margin-right:60px;margin-top:15px">
                <i class="fa fa-paper-plane fa-3x" style="width:10px;height:10px; color:#0094ff;"></i>
            </button>
        </div>
    </div>
</div>
<script id="message-template" type="text/x-handlebars-template">
    <li class="clearfix">
        <div class="message-data align-right">
            <span class="message-data-time">{{time}}</span> &nbsp; &nbsp;
            <span class="message-data-name" style="font-weight:bolder">You</span> <i class="fa fa-circle me"></i>
        </div>
        <div class="message other-message float-right">
            {{messageOutput}}
        </div>
    </li>
</script>

<script id="message-response-template" type="text/x-handlebars-template">
    <li>
        <div class="message-data">
            <span class="message-data-name" style="font-weight:bolder"><i class="fa fa-circle online"></i>{{partner}}</span>
            <span class="message-data-time">{{time}}</span>
        </div>
        <div class="message my-message">
            {{response}}
        </div>
    </li>
</script>

@section scripts{
    <script src="//cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
    <script src="~/Scripts/jquery.signalR-2.4.0.js"></script>
    <script src="~/signalr/js"></script>
    <script src="~/Scripts/chat/signalr-chat-file.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.12/handlebars.min.js"></script>
    <script src="~/Scripts/jquery-3.3.1.min.js"></script>
    <link href="~/Content/bootstrap.css" rel="stylesheet" />
    <link href="~/Content/font-awesome.css" rel="stylesheet" />
    <link href="~/Content/chat.css" rel="stylesheet" />
}